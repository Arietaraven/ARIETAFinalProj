<h1>{{post?.title}}</h1>
<img src="{{post?.imgPath}}"/>
<p>{{post?.description}}</p>

<p>{{post?.author}}</p>
<P>{{post?.dateCreated}}</P>
<p>
    <button (click)="onClick()" class="bi bi-heart btn btn-danger" >
    {{post?.numberOfLikes}}</button> |
<button class="btn btn-primary" (click)="onEdit()">Edit</button> | 
<button class="btn btn-danger" (click)="delete()">Delete</button>
</p>


<div class="comment-section">
    <input type="text" [(ngModel)]="comment" placeholder="add a comment">
    <button class="btn btn-primary" (click)="addComment(index, comment)">Add Comment</button>
  </div><br>
  
        <!-- <div *ngFor="let comment of post?.comments; let i = index">
            <p *ngIf="comment?.text">{{ comment.text }}</p>
            <button class="bi bi-heart btn btn-danger" (click)="likeComment(index, i)"></button> |
            <span *ngIf="comment?.likes">{{ comment.likes }}</span>

          <div *ngFor="let reply of comment.commentReplies; let replyIndex = index">
            <p *ngIf="reply?.text">{{ reply.text }}</p>
            <button class="bi bi-heart btn btn-danger" (click)="likeReply(index, commentIndex, replyIndex)"></button>
            <span *ngIf="reply?.likes">{{ reply.likes }}</span>
        </div>
        

    <button class="btn btn-danger" (click)="deleteComment(commentIndex)">Delete</button> |
    <button class="btn btn-primary" (click)="setParentCommentIndex(commentIndex)">Reply</button>
    <div *ngIf="replyingTo === commentIndex">
      <input type="text" [(ngModel)]="replyComment" placeholder="add a reply">
      <button class="btn btn-primary" (click)="addComment(index, replyComment, commentIndex)">Submit Reply</button>
    </div>
        </div> -->

        <!-- <div *ngFor="let comment of post?.comments; let i = index">
            <p *ngIf="comment?.text">{{ comment.text }}</p>
            <button class="bi bi-heart btn btn-danger" (click)="likeComment(index, i)"></button> |
            <span *ngIf="comment?.likes">{{ comment.likes }}</span>
        
            <div *ngFor="let reply of comment.commentReplies; let replyIndex = index">
                <p *ngIf="reply?.text">{{ reply.text }}</p>
                <button class="bi bi-heart btn btn-danger" (click)="likeReply(index, commentIndex, replyIndex)"></button>
                <span *ngIf="reply?.likes">{{ reply.likes }}</span>
            </div>
        
            <button class="btn btn-danger" (click)="deleteComment(commentIndex)">Delete</button> |
            <button class="btn btn-primary" (click)="setParentCommentIndex(commentIndex)">Reply</button>
        </div>
        
        <div *ngIf="replyingTo !== null">
            <input type="text" [(ngModel)]="replyComment" placeholder="add a reply">
            <button class="btn btn-primary" (click)="addComment(index, replyComment, replyingTo)">Submit Reply</button>
        </div> -->

        <!-- <div *ngFor="let comment of post?.comments; let i = index">
            <p *ngIf="comment?.text">{{ comment.text }}</p>
            <button class="bi bi-heart btn btn-danger" (click)="likeComment(index, i)"></button> |
            <span *ngIf="comment?.likes">{{ comment.likes }}</span>
        
            <div *ngFor="let reply of comment.commentReplies; let replyIndex = index">
                <p *ngIf="reply?.text">{{ reply.text }}</p>
                <button class="bi bi-heart btn btn-danger" (click)="likeReply(index, commentIndex, replyIndex)"></button> |
                <span *ngIf="reply?.likes">{{ reply.likes }}</span>
            </div>
        
            <button class="btn btn-danger" (click)="deleteComment(commentIndex)">Delete</button> |
            <button class="btn btn-primary" (click)="setParentCommentIndex(i)">Reply</button>
        
            <div *ngIf="replyingTo === i">
                <input type="text" [(ngModel)]="replyComment" placeholder="add a reply">
                <button class="btn btn-primary" (click)="addComment(index, replyComment, replyingTo)">Submit Reply</button>
            </div>
        </div> -->


        <div *ngFor="let comment of post?.comments; let i = index">
            <p *ngIf="comment?.text">{{ comment.text }}</p>
            <div *ngFor="let reply of comment.commentReplies; let replyIndex = index">
                <p *ngIf="reply?.text">{{ reply.text }}</p>
            </div>
        
            <div class="button-container">
                <button class="bi bi-heart btn btn-danger" (click)="likeComment(index, i)"></button> |
                <span *ngIf="comment?.likes">{{ comment.likes }}</span>
                <button class="btn btn-danger" (click)="deleteComment(commentIndex)">Delete</button> |
                <button class="btn btn-primary" (click)="setParentCommentIndex(i)">Reply</button>
            </div>
        
            <div *ngIf="replyingTo === i">
                <input type="text" [(ngModel)]="replyComment" placeholder="add a reply">
                <button class="btn btn-primary" (click)="addComment(index, replyComment, replyingTo)">Submit Reply</button>
            </div>
        </div>
